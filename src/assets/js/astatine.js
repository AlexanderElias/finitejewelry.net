/*
	version: 1.1.2
	title: astatine
	author: alexander elias
*/
!function(){"use strict";function t(t){var e="",n=null;for(n in t)e=e.length>0?e+"&":e,e=e+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e}function e(t){for(var e=t.querySelectorAll("input, textarea, select"),n={},i=0,r=e.length;i<r;i++){var o=e[i],a=o.name,s=o.type,d=o.value,c=o.checked,u=o.disabled;if(a&&!u&&"submit"!==s&&"reset"!==s&&"button"!==s&&"file"!==s)if("checkbox"===s)n[a]=c;else if("radio"===s)c&&(n[a]=d);else if("select-one"===s||"select-multiple"===s){n[a]=[];for(var l=0,p=o.selectedOptions.length;l<p;l++)n[a].push(o.selectedOptions[l].value);n[a]=n[a].join(", ")}else n[a]=d}return n}function n(e){if(!e)throw new Error("Astatine.ajax: requires options");e.action||(e.action=window.location.pathname),e.enctype||(e.enctype="text/plain"),e.method?e.method=e.method.toUpperCase():e.method="GET",e.data&&("GET"===e.method?(e.action=e.action+"?"+t(e.data),e.data=null):e.enctype.search("application/x-www-form-urlencoded")!==-1?e.data=t(e.data):e.enctype.search("application/json")!==-1&&(e.data=JSON.stringify(e.data)));var n=new XMLHttpRequest;if(n.open(e.method,e.action,!0,e.username,e.password),e.mimeType&&n.overrideMimeType(e.mimeType),e.withCredentials&&(n.withCredentials=e.withCredentials),e.headers)for(var i in e.headers)n.setRequestHeader(i,e.headers[i]);n.onreadystatechange=function(){if(4===n.readyState)if(n.status>=200&&n.status<300){if(e.success)return e.success(n)}else if(e.error)return e.error(n)},n.send(e.data)}function i(t,e){window.addEventListener("DOMContentLoaded",function(){var n="string"==typeof t?document.querySelector(t):t,i=document.createElement("div");i.classList.add("spinner"),n.appendChild(i),n.addEventListener("submit",function(t){t.preventDefault(),e(n,n.querySelector("[type=submit]"),i)})})}function r(t){if(!t)throw new Error("Astatine.submit: requires options");if(!t.query)throw new Error("Astatine.submit: requires options.query");i(t.query,function(i,r,o){o&&(o.style.display="block"),r&&(r.style.display="none"),t.data=t.data||e(i),t.action=t.action||i.getAttribute("action"),t.method=t.method||i.getAttribute("method"),t.enctype=t.enctype||i.getAttribute("enctype"),t.headers=t.headers||{"Content-Type":t.enctype},t.success=function(e){if(o&&(o.style.display="none"),r&&(r.style.display="block"),i.reset(),t.complete)return t.complete(null,e)},t.error=function(e){if(o&&(o.style.display="none"),r&&(r.style.display="block"),t.data=null,t.complete)return t.complete(e,null)},t.prepare&&(t.data=t.prepare(t.data)||t.data),"function"==typeof t.data?t.data(function(e){t.data=e,n(t)}):n(t)})}function o(t){return"\n\t.spinner {\n\t\tmargin: auto;\n\t\tdisplay: none;\n\t\twidth: "+t.thickness+";\n\t\theight: "+t.thickness+";\n\t\tborder: solid "+t.size+" "+t.colorBottom+";\n\t\tborder-top: solid "+t.size+" "+t.colorTop+";\n\t\tborder-radius: 50%;\n\t\tanimation: spin 2s linear infinite;\n\t\t-o-animation: spin 2s linear infinite;\n\t\t-ms-animation: spin 2s linear infinite;\n\t\t-moz-animation: spin 2s linear infinite;\n\t\t-webkit-animation: spin 2s linear infinite;\n\t}\n\t@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n\t@-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(360deg); } }\n\t@-ms-keyframes spin { 0% { -ms-transform: rotate(0deg); } 100% { -ms-transform: rotate(360deg); } }\n\t@-moz-keyframes spin { 0% { -moz-transform: rotate(0deg); } 100% { -moz-transform: rotate(360deg); } }\n\t@-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); } }\n\t"}function a(t){var e=document.head,n=e.querySelector("[title=Astatine]"),i=o(t),r=document.createElement("style"),a=document.createTextNode(i);r.setAttribute("title","Astatine"),r.appendChild(a),n?e.replaceChild(r,n):document.head.appendChild(r)}var s={setup:{spinner:{s:"3px",t:"15px",ct:"darkgray",cb:"lightgray"}},ajax:n,submit:r,formData:e,serialize:t};Object.defineProperties(s.setup.spinner,{size:{get:function(){return this.s},set:function(t){this.s=t,a(this)}},thickness:{get:function(){return this.t},set:function(t){this.t=t,a(this)}},colorTop:{get:function(){return this.ct},set:function(t){this.ct=t,a(this)}},colorBottom:{get:function(){return this.cb},set:function(t){this.cb=t,a(this)}}}),window.At=s,window.Astatine=s,document.addEventListener("DOMContentLoaded",function(){a(window.Astatine.setup.spinner)})}();
